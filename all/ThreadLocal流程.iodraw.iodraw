<mxGraphModel dx="1030" dy="531" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="PKMA2QC2BMBOHINt20Tq-3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="PKMA2QC2BMBOHINt20Tq-1" target="PKMA2QC2BMBOHINt20Tq-2" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="PKMA2QC2BMBOHINt20Tq-1" value="Threadlocal.set（val）" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="320" y="110" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-2" value="map!=null" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="PKMA2QC2BMBOHINt20Tq-2" target="7rhZt73F2M1Tt3vlUeAq-1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-4" value="map==null" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="PKMA2QC2BMBOHINt20Tq-2" target="7rhZt73F2M1Tt3vlUeAq-3"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="PKMA2QC2BMBOHINt20Tq-2" value="getMap获取当前线程的lTreadocalMap" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="320" y="250" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-3" target="7rhZt73F2M1Tt3vlUeAq-5"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-3" value="createMap" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="320" y="390" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-5" target="7rhZt73F2M1Tt3vlUeAq-7"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-5" value="&amp;nbsp;new ThreadLocalMap(this, firstValue);创建初始化Map" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="320" y="530" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-7" target="7rhZt73F2M1Tt3vlUeAq-21"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-7" value="&amp;nbsp;用斐波拉契计算entry下标位置：firstKey.threadLocalHashCode &amp;amp; (INITIAL_CAPACITY - 1);" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="320" y="670" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-21" value="map赋值给当前线程" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="320" y="810" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-1" target="7rhZt73F2M1Tt3vlUeAq-9"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-1" value="&amp;nbsp;map.set(this, value);" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="520" y="250" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-9" target="7rhZt73F2M1Tt3vlUeAq-11"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-14" value="key为空" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-9" target="7rhZt73F2M1Tt3vlUeAq-13"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-24" value="&#10;&#10;&lt;span style=&quot;color: rgb(0, 0, 0); font-family: helvetica; font-size: 11px; font-style: normal; font-weight: 400; letter-spacing: normal; text-align: center; text-indent: 0px; text-transform: none; word-spacing: 0px; background-color: rgb(255, 255, 255); display: inline; float: none;&quot;&gt;entry为空&lt;/span&gt;&#10;&#10;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-9" target="7rhZt73F2M1Tt3vlUeAq-23"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-9" value="线性探测：向后寻找直到找到空entry" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="720" y="250" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-23" value="赋值新entry" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="720" y="110" width="120" height="60" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-26" value="&lt;br&gt;&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;向前查找&lt;/span&gt;&lt;br&gt;prevIndex" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-13" target="7rhZt73F2M1Tt3vlUeAq-25"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-28" value="向后查找" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="7rhZt73F2M1Tt3vlUeAq-13" target="7rhZt73F2M1Tt3vlUeAq-27"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-13" value="replaceStaleEntry(key, value, i);&lt;br&gt;清除null的空key，当前Threadlocal与空key交互位置" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="720" y="390" width="130" height="70" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-27" value="向后查找到原来TreadLocal的位置，与第一次entry的可以为空交互位置" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="980" y="390" width="130" height="70" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-25" value="向前查找到key==null为空的entry，修改slotToExpunge = i为当前索引" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="720" y="540" width="130" height="70" as="geometry"/></mxCell><mxCell id="7rhZt73F2M1Tt3vlUeAq-11" value="如果当前Threadlocal与entry的key相同，替换vale并返回" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="920" y="250" width="120" height="60" as="geometry"/></mxCell></root></mxGraphModel>